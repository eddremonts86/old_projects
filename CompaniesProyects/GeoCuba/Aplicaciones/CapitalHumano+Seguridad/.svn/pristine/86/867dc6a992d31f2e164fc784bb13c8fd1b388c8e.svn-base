function Organigrama(){    this.Init = function(){        Ext.require(['Ext.tip.*','Ext.grid.*','Ext.grid.plugin.*','Ext.grid.features.*','Ext.util.*','Ext.toolbar.Paging','Ext.ux.SlidingPager','Ext.ux.PreviewPlugin','Ext.ModelManager','Ext.tip.QuickTipManager']);        Ext.require(['Ext.chart.*','Ext.Window', 'Ext.layout.container.Fit', 'Ext.fx.target.Sprite', 'Ext.window.MessageBox','Ext.layout.container.Table','Ext.ux.Spotlight']);        Ext.require(['Ext.form.*','Ext.layout.container.Column','Ext.fx.target.Element']);        Ext.require(['Ext.draw.*']);        var _menu_item_config_Organigrama =        {            text: 'Organigrama',            id: 'Organigrama_menu_id',            iconCls: 'nomencladores',            handler: Ext.Function.bind(this.ShowMainWindow, this)        };        App.InsertSubItemMenu('Codificadores','Organigramas',_menu_item_config_Organigrama);                    }    this.BuildMainPanel = function (filterObj) {        ///-----------------------------------------------------------------------------------------------------------//        this.cellEditing = new Ext.grid.plugin.CellEditing({clicksToEdit:1});        this.__data_store = App.BuildJsonStore('Organigrama.Organigrama.CargarDatos',{                fields: [                    {name: 'id'},                    {name: 'nombre_completo'},                    {name: 'nombre'},                    {name:'cargo'},                    {name:'cargoid'},                    {name:'idtra'},                    {name:'area'},                    {name:'agencia'},                    {name:'contrato_id'},                    {name:'no_identidad'},                    {name:'fecha_nacimiento'},                    {name:'telefono'},                    {name:'direccion'},                    {name:'sancionado', type:'boolean'},                    {name:'baja_a', type:'boolean'},                    {name:'licencia_a',type:'boolean'},                    {name:'baja',type:'boolean'},                    {name:'licencia',type:'boolean'},                    {name:'director_general',type:'boolean'},                    {name:'director_unidad',type:'boolean'},                    {name:'director_area',type:'boolean'}                ],                proxy: {type: 'ajax',reader: {type: 'json',root: 'rows',totalProperty: 'results'}},                pageSize: 15,                autoLoad: false            });        this.__data_store.load({params:{start:0,limit:15}});        var _grid = new Ext.grid.Panel({                id: 'Organigrama_general',                frame: true,                store: this.__data_store,                plugins: [this.cellEditing],                columns: [                Ext.create('Ext.grid.RowNumberer'),                {                    header: 'Trabajador',                    menuDisabled: true,                    sortable : true,                    dataIndex: 'nombre_completo',                    flex: 2,renderer:pintar                },                {                        header: 'Agencia',                        menuDisabled: true,                        sortable : true,                        dataIndex: 'agencia',                        flex: 1,renderer:pintar                    },                {                        header: '&Aacute;rea',                        menuDisabled: true,                        sortable : true,                        dataIndex: 'area',                        flex: 1,renderer:pintar                    },                {                        header: 'Cargo',                        menuDisabled: true,                        sortable : true,                        dataIndex: 'cargo',                        flex: 1,                        renderer:pintar                    },                {                text: 'Responsabilidad', flex: 3,                columns: [                {                        xtype: 'checkcolumn',                        header:'Director General',                        dataIndex:'director_general',                        flex: 1,                        stopSelection: false,                        listeners: { checkchange:function(This, rowIndex, checked){                            if (checked==true){                                var id = Ext.getCmp('Organigrama_general').store.getAt(rowIndex).data.id ;                                var idtra = Ext.getCmp('Organigrama_general').store.getAt(rowIndex).data.idtra ;                                var nombre_completo = Ext.getCmp('Organigrama_general').store.getAt(rowIndex).data.nombre_completo ;                                var cargoid = Ext.getCmp('Organigrama_general').store.getAt(rowIndex).data.cargoid ;                                var contrato_id = Ext.getCmp('Organigrama_general').store.getAt(rowIndex).data.contrato_id;                                var dirir=1;                                App.__modules_manager.GetInstanceOf('Organigrama').winaddOrganigrama(id,nombre_completo,idtra,dirir,cargoid,contrato_id)                                }                            else {                                var id = Ext.getCmp('Organigrama_general').store.getAt(rowIndex).data.id ;                                var idtra = Ext.getCmp('Organigrama_general').store.getAt(rowIndex).data.idtra ;                                var nombre_completo = Ext.getCmp('Organigrama_general').store.getAt(rowIndex).data.nombre_completo ;                                var dirir=-1;                                var cargoid = Ext.getCmp('Organigrama_general').store.getAt(rowIndex).data.cargoid ;                                var contrato_id = Ext.getCmp('Organigrama_general').store.getAt(rowIndex).data.contrato_id;                                App.__modules_manager.GetInstanceOf('Organigrama').winaddOrganigrama(id,nombre_completo,idtra,dirir,cargoid,contrato_id)                            }                        }                    }                },                {                        xtype: 'checkcolumn',                        header:'Director Unidad',                        dataIndex:'director_unidad',                        flex: 1,                        stopSelection: false,                    listeners: { checkchange:function(This, rowIndex, checked){                        if (checked==true){                            var id = Ext.getCmp('Organigrama_general').store.getAt(rowIndex).data.id ;                            var idtra = Ext.getCmp('Organigrama_general').store.getAt(rowIndex).data.idtra;                            var nombre_completo = Ext.getCmp('Organigrama_general').store.getAt(rowIndex).data.nombre_completo ;                            var dirir=2; var cargoid = Ext.getCmp('Organigrama_general').store.getAt(rowIndex).data.cargoid ;                            App.__modules_manager.GetInstanceOf('Organigrama').winaddOrganigrama(id,nombre_completo,idtra,dirir,cargoid)                        }                        else {                            var id = Ext.getCmp('Organigrama_general').store.getAt(rowIndex).data.id ;                            var idtra = Ext.getCmp('Organigrama_general').store.getAt(rowIndex).data.idtra ;                            var nombre_completo = Ext.getCmp('Organigrama_general').store.getAt(rowIndex).data.nombre_completo ;                            var dirir=-2; var cargoid = Ext.getCmp('Organigrama_general').store.getAt(rowIndex).data.cargoid ;                            App.__modules_manager.GetInstanceOf('Organigrama').winaddOrganigrama(id,nombre_completo,idtra,dirir,cargoid)                        }                    }                    }                },                {                        xtype: 'checkcolumn',                        header:'Director &aacute;rea',                        dataIndex:'director_area',                        flex: 1,                        stopSelection: false,                    listeners: { checkchange:function(This, rowIndex, checked){                        if (checked==true){                            var id = Ext.getCmp('Organigrama_general').store.getAt(rowIndex).data.id ;                            var idtra = Ext.getCmp('Organigrama_general').store.getAt(rowIndex).data.idtra ;                            var nombre_completo = Ext.getCmp('Organigrama_general').store.getAt(rowIndex).data.nombre_completo ;                            var dirir=3; var cargoid = Ext.getCmp('Organigrama_general').store.getAt(rowIndex).data.cargoid ;                            App.__modules_manager.GetInstanceOf('Organigrama').winaddOrganigrama(id,nombre_completo,idtra,dirir,cargoid)                        }                        else {                            var id = Ext.getCmp('Organigrama_general').store.getAt(rowIndex).data.id ;                            var idtra = Ext.getCmp('Organigrama_general').store.getAt(rowIndex).data.idtra ;                            var nombre_completo = Ext.getCmp('Organigrama_general').store.getAt(rowIndex).data.nombre_completo ;                            var dirir=-3; var cargoid = Ext.getCmp('Organigrama_general').store.getAt(rowIndex).data.cargoid ;                            App.__modules_manager.GetInstanceOf('Organigrama').winaddOrganigrama(id,nombre_completo,idtra,dirir,cargoid)                        }                    }                    }                 }                ]}                ],                viewConfig: {forceFit: true},                bbar: {                    xtype: 'pagingtoolbar',                    pageSize: 5,                    store: this.__data_store,                    dock: 'bottom',                    displayInfo: false                }            });        var panel_tree_grid = Ext.create('Ext.form.Panel', {            bodyPadding: 5,            width:'99%',            height: '100%',            title:'Todos los Trabajadores - Empresa Geocuba',            autoScroll: true,            layout: 'fit',            id:'panel_tree_aa',            name:'panel_tree_aa',            border:2,            tools:[                {                    type:'help',                    tooltip: 'Get Help',                    handler: function(event, toolEl, panel){                        /* tools: [                         {type:'toggle'},                         {type:'close'},                         {type:'minimize'},                         {type:'maximize'},                         {type:'restore'},                         {type:'gear'},                         {type:'pin'},                         {type:'unpin'},                         {type:'right'},                         {type:'left'},                         {type:'down'},                         {type:'refresh'},                         {type:'minus'},                         {type:'plus'},                         {type:'help'},                         {type:'search'},                         {type:'save'},                         {type:'print'}                         ],                         */                        Ext.create('Ext.window.Window', {                            title: '¿Necesita Ayuda?',                            height:'25%',iconCls:'help',                            width:'50%',modal:true,                            layout: 'anchor',                            html:                                '<ul class="nav nav-list">' +                                    '<li>El panel <span class="label label-info">" Todos los Trabajadores - Empresa Geocuba "</span>' +                                    ' organiza de forma sencilla toda la empresa para gestionar la información referente a esta.<br>' +                                    'En el panel se puede modificar la <span class="label label-warning">responsabilidad</span> de un trabajador dado.</li>' +                                    '</ul>'                        }).show();                    }                }],            resizable :true,            collapsed: false,            animCollapse: true,            collapsible: true,            defaults: {anchor: '100%'},            items:[_grid]        });       ///------------------------------------------------------------------------------------------------------------//        var store=App.PerformSyncServerRequest('Organigrama.Organigrama.CargarAreas')        var dataos = [];        for(var i=0; i<store.length;i++){          var area=store[i]['nombre'];          this.__data_store_Datos_Area = App.BuildJsonStore('Organigrama.Organigrama.Datos_Area',{                fields: [                    {name: 'id'},                    {name: 'nombre_completo'},                    {name: 'nombre'},                    {name:'cargo'},                    {name:'cargoid'},                    {name:'idtra'},                    {name:'area'},                    {name:'agencia'},                    {name:'contrato_id'},                    {name:'no_identidad'},                    {name:'fecha_nacimiento'},                    {name:'telefono'},                    {name:'direccion'},                    {name:'sancionado', type:'boolean'},                    {name:'baja_a', type:'boolean'},                    {name:'licencia_a',type:'boolean'},                    {name:'baja',type:'boolean'},                    {name:'licencia',type:'boolean'},                    {name:'director_general',type:'boolean'},                    {name:'director_unidad',type:'boolean'},                    {name:'director_area',type:'boolean'}                ],                proxy: {type: 'ajax',reader: {type: 'json',root: 'rows',totalProperty: 'results'}},                pageSize: 15,                params:{area:area},                autoLoad: false            });          this.cellEditingA = new Ext.grid.plugin.CellEditing({clicksToEdit:1});          var grid = new Ext.grid.Panel({            id: 'Organigrama_general'+store[i]['id'],            name: 'Organigrama_general'+store[i]['id'],            frame: true,            store: this.__data_store_Datos_Area,            plugins: [this.cellEditingA],            columns: [                Ext.create('Ext.grid.RowNumberer'),                {                    header: 'Trabajador',                    menuDisabled: true,                    sortable : true,                    dataIndex: 'nombre_completo',                    flex: 2,renderer:pintar                },                {                    header: 'Cargo',                    menuDisabled: true,                    sortable : true,                    dataIndex: 'cargo',                    flex: 1,renderer:pintar                },                {text: 'Responsabilidad', flex: 2,                columns: [                {                    xtype: 'checkcolumn',                    header:'Director Area',                    dataIndex:'director_area',                    flex: 1,                    stopSelection: false,                    listeners: { checkchange:function(This, rowIndex, checked){                        if (checked==true){                            var gridM=This.up('grid').getStore().getAt(rowIndex).data;                            var id = gridM.id ;                            var idtra = gridM.idtra;                            var nombre_completo = gridM.nombre_completo ;                            var dirir=3;                            var cargoid =gridM.cargoid ;                            App.__modules_manager.GetInstanceOf('Organigrama').winaddOrganigrama(id,nombre_completo,idtra,dirir,cargoid)                        }                        else {                            var gridM=This.up('grid').getStore().getAt(rowIndex).data;                            var id = gridM.id ;                            var idtra = gridM.idtra;                            var nombre_completo = gridM.nombre_completo ;                            var dirir=-3;                            var cargoid =gridM.cargoid ;App.__modules_manager.GetInstanceOf('Organigrama').winaddOrganigrama(id,nombre_completo,idtra,dirir,cargoid)                        }                    }                    }                }]}            ],            viewConfig: {forceFit: true},            bbar: {                xtype: 'pagingtoolbar',                pageSize: 15,                store: this.__data_store_Datos_Area,                dock: 'bottom',                displayInfo: false            }            });          var panel = Ext.create('Ext.form.Panel',{                bodyPadding: 15,                width:'50%',                height: '50%',                minHeight :'25%',                title:'Area o Departamento: "'+store[i]['nombre']+'"',                autoScroll: true,                layout: 'fit',                id:'panel'+store[i]['id'],                name:'panel'+store[i]['id'],                border:2,                resizable :true,                collapsed: true,                animCollapse: true,                collapsible: true,                defaults: {anchor: '100%'},                items:[grid],              listeners:{/*collapse:function( p, eOpts ){                  p.down('grid').getStore().load();                         },*/                  expand:function( p, eOpts ){                      p.down('grid').getStore().load();                        }              }            });            dataos[i]=panel;        }        var panel_tree_grid_areas = Ext.create('Ext.form.Panel', {            bodyPadding: 5,            width:'100%',            height: '100%',            title:'Todos los Trabajadores y sus &Aacute;reas o Departamentos - Empresa Geocuba',            autoScroll: true,            layout: 'anchor',            id:'panel_tree_aras',            name:'panel_tree_aras',            hidden:true,            border:2,            resizable :true,            collapsed: false,            animCollapse: true,            collapsible: true,            tools:[                {                    type:'help',                    tooltip: 'Get Help',                    handler: function(event, toolEl, panel){                        /* tools: [                         {type:'toggle'},                         {type:'close'},                         {type:'minimize'},                         {type:'maximize'},                         {type:'restore'},                         {type:'gear'},                         {type:'pin'},                         {type:'unpin'},                         {type:'right'},                         {type:'left'},                         {type:'down'},                         {type:'refresh'},                         {type:'minus'},                         {type:'plus'},                         {type:'help'},                         {type:'search'},                         {type:'save'},                         {type:'print'}                         ],                         */                        Ext.create('Ext.window.Window', {                            title: '¿Necesita Ayuda?',                            height:'25%',                            width:'50%',modal:true,                            layout: 'anchor',iconCls:'help',                            html:                                '<ul class="nav nav-list">' +                                    '<li>El panel <span class="label label-info">" Todos los Trabajadores y sus &Aacute;reas o Departamentos - Empresa Geocuba "</span>' +                                    ' organiza de forma sencilla todas las &aacute;reas de la empresa para gestionar la información referente a estas</li>' +                                    '</ul>'                        }).show();                    }                }],            defaults: {anchor: '100%'},            items:dataos        });        ///-----------------------------------------------------------------------------------------------------------//        var storeAgecias=App.PerformSyncServerRequest('Organigrama.Organigrama.CargarAgencias');        var agenc=[]        for(var z=0; z<storeAgecias.length;z++){            var agencia=storeAgecias[z]['nombre'];            this.__data_store_Datos_agencia = App.BuildJsonStore('Organigrama.Organigrama.Datos_Agencias',{                fields: [                    {name: 'id'},                    {name: 'nombre_completo'},                    {name: 'nombre'},                    {name:'cargo'},                    {name:'cargoid'},                    {name:'idtra'},                    {name:'area'},                    {name:'agencia'},                    {name:'contrato_id'},                    {name:'no_identidad'},                    {name:'fecha_nacimiento'},                    {name:'telefono'},                    {name:'direccion'},                    {name:'sancionado', type:'boolean'},                    {name:'baja_a', type:'boolean'},                    {name:'licencia_a',type:'boolean'},                    {name:'baja',type:'boolean'},                    {name:'licencia',type:'boolean'},                    {name:'director_general',type:'boolean'},                    {name:'director_unidad',type:'boolean'},                    {name:'director_area',type:'boolean'}                ],                proxy: {type: 'ajax',reader: {type: 'json',root: 'rows',totalProperty: 'results'}},                pageSize: 15,                params:{agencia:agencia},                autoLoad: false            });            this.cellEditingAgencias = new Ext.grid.plugin.CellEditing({clicksToEdit:1});            var grid_agencia = new Ext.grid.Panel({                id: 'Organigrama_general'+storeAgecias[z]['id'],                name: 'Organigrama_general'+storeAgecias[z]['id'],                frame: true,                store: this.__data_store_Datos_agencia,                plugins: [this.cellEditingAgencias],                columns: [                    Ext.create('Ext.grid.RowNumberer'),                    {                        header: 'Trabajador',                        menuDisabled: true,                        sortable : true,                        dataIndex: 'nombre_completo',                        flex: 2,renderer:pintar                },                    {                        header: '&aacute;rea',                        menuDisabled: true,                        sortable : true,                        dataIndex: 'area',                        flex: 1,renderer:pintar                    },                    {                        header: 'Cargo',                        menuDisabled: true,                        sortable : true,                        dataIndex: 'cargo',                        flex: 1,renderer:pintar                    },                    {                        text: 'Responsabilidad', flex: 2,                        columns: [                    {                        xtype: 'checkcolumn',                        header:'Director Agencia',                        dataIndex:'director_unidad',                        flex: 1,                        stopSelection: false,                        listeners: { checkchange:function(This, rowIndex, checked){                            if (checked==true){                                var gridM=This.up('grid').getStore().getAt(rowIndex).data;                                var id = gridM.id ;                                var idtra = gridM.idtra;                                var nombre_completo = gridM.nombre_completo ;                                var dirir=2;                                var cargoid =gridM.cargoid ;                                App.__modules_manager.GetInstanceOf('Organigrama').winaddOrganigrama(id,nombre_completo,idtra,dirir,cargoid)                            }                            else {                                var gridM=This.up('grid').getStore().getAt(rowIndex).data;                                var id = gridM.id ;                                var idtra = gridM.idtra;                                var nombre_completo = gridM.nombre_completo ;                                var dirir=-2;                                var cargoid =gridM.cargoid ;                                App.__modules_manager.GetInstanceOf('Organigrama').winaddOrganigrama(id,nombre_completo,idtra,dirir,cargoid)                            }                        }                        }                    },                    {                        xtype: 'checkcolumn',                        header:'Director &Aacute;rea',                        dataIndex:'director_area',                        flex: 1,                        stopSelection: false,                        listeners: { checkchange:function(This, rowIndex, checked){                            if (checked==true){                                var gridM=This.up('grid').getStore().getAt(rowIndex).data;                                var id = gridM.id ;                                var idtra = gridM.idtra;                                var nombre_completo = gridM.nombre_completo ;                                var dirir=3;                                var cargoid =gridM.cargoid ; App.__modules_manager.GetInstanceOf('Organigrama').winaddOrganigrama(id,nombre_completo,idtra,dirir,cargoid)                            }                            else {                                var gridM=This.up('grid').getStore().getAt(rowIndex).data;                                var id = gridM.id ;                                var idtra = gridM.idtra;                                var nombre_completo = gridM.nombre_completo ;                                var dirir=-3;                                var cargoid =gridM.cargoid ;App.__modules_manager.GetInstanceOf('Organigrama').winaddOrganigrama(id,nombre_completo,idtra,dirir,cargoid)                            }                        }                        }                    }]}                ],                viewConfig: {forceFit: true},                bbar: {                    xtype: 'pagingtoolbar',                    pageSize: 15,                    store: this.__data_store_Datos_agencia,                    dock: 'bottom',                    displayInfo: false                }            });            var panel_agencia = Ext.create('Ext.form.Panel',{                bodyPadding: 15,                width:'50%',                height: '50%',                title:'Agencia: "'+storeAgecias[z]['nombre']+'"',                autoScroll: true,                layout: 'fit',                id:'panel'+storeAgecias[z]['id'],                name:'panel'+storeAgecias[z]['id'],                border:2,                resizable :true,                collapsed: true,                animCollapse: true,                collapsible: true,                defaults: {anchor: '100%'},                items:[grid_agencia],                listeners:{/*collapse:function( p, eOpts ){                 p.down('grid').getStore().load();                 },*/                    expand:function( p, eOpts ){                        p.down('grid').getStore().load();                    }                }            });            agenc[z]=panel_agencia;        }        var panel_tree_agencias = Ext.create('Ext.form.Panel', {            bodyPadding: 5,            width:'100%',            height:'100%',            title:'Todos los Trabajadores y sus Agencias - Empresa Geocuba',            autoScroll: true,            layout: 'anchor',            id:'panel_tree_agencias',            name:'panel_tree_agencias',            hidden:true,            tools:[                {                    type:'help',                    tooltip: 'Get Help',                    handler: function(event, toolEl, panel){                        /* tools: [                         {type:'toggle'},                         {type:'close'},                         {type:'minimize'},                         {type:'maximize'},                         {type:'restore'},                         {type:'gear'},                         {type:'pin'},                         {type:'unpin'},                         {type:'right'},                         {type:'left'},                         {type:'down'},                         {type:'refresh'},                         {type:'minus'},                         {type:'plus'},                         {type:'help'},                         {type:'search'},                         {type:'save'},                         {type:'print'}                         ],                         */                        Ext.create('Ext.window.Window', {                            title: '¿Necesita Ayuda?',                            height:'25%',                            width:'50%',modal:true,                            layout: 'anchor',iconCls:'help',                            html:                                '<ul class="nav nav-list">' +                                    '<li>El panel <span class="label label-info">" Todos los Trabajadores y sus Agencias - Empresa Geocuba "</span>' +                                    ' organiza de forma sencilla todas las agencias de la empresa para gestionar la información referente a estas</li>' +                                    '</ul>'                        }).show();                    }                }],            border:2,            resizable :true,            collapsed: false,            animCollapse: true,            collapsible: true,            defaults: {anchor: '100%'},            items:agenc        });        ///-----------------------------------------------------------------------------------------------------------//        var bot =Ext.create('Ext.Button', {           // renderTo: Ext.getBody(),            text: 'Click Me',            enableToggle: true        });        var panel_tree = Ext.create('Ext.form.Panel', {            bodyPadding: 5,            width: '15%',            autoScroll: true,            title:'Estructura Organizativa',            layout: 'anchor',            region: 'west',            id:'panel_tree',            name:'panel_tree',            border:2,            collapsed: false,            animCollapse: true,            collapsible: true,            tools:[                {                    type:'help',                    tooltip: 'Get Help',                    handler: function(event, toolEl, panel){                        /* tools: [                         {type:'toggle'},                         {type:'close'},                         {type:'minimize'},                         {type:'maximize'},                         {type:'restore'},                         {type:'gear'},                         {type:'pin'},                         {type:'unpin'},                         {type:'right'},                         {type:'left'},                         {type:'down'},                         {type:'refresh'},                         {type:'minus'},                         {type:'plus'},                         {type:'help'},                         {type:'search'},                         {type:'save'},                         {type:'print'}                         ],                         */                        Ext.create('Ext.window.Window', {                            title: '¿Necesita Ayuda?',                            height:'25%',                            width:'50%',modal:true,                            layout: 'anchor',iconCls:'help',                            html:                                '<ul class="nav nav-list">' +                                '<li>El panel de  <span class="label label-info">" Estructura Organizativa "</span> se utiliza b&aacute;sicamente para ' +                                'dividir y visualizar la plantilla en sus diferentes esquemas.</li>' +                                '<li>Desde la' +' estructura general <span class="label label-info">" General "</span> donde se puede ver ' +                                'todos los empleados de la' +' empresa con sus cargos, agencias, &aacute;reas ademas de sus responsabilidades,' +                                'hasta la b&aacute;sica <span class="label label-info">" &Aacute;reas y departamentos "</span> .</li>' +                                '</ul>'                        }).show();                    }                }],            defaults: {anchor: '100%'},            items:[                {                    xtype: 'fieldset',                    flex: 1,cls:'btn-bar',                    title: 'Estructura',                    defaultType: 'radio', // each item will be a radio button                    layout: 'anchor',                    defaults: {                        anchor: '100%',                        hideEmptyLabel: false,                        hideLabel:true                    },                    items: [                        {                            checked: true,                            fieldLabel: 'Favorite Color',                            boxLabel: 'General',                            name: 'datos',                            inputValue: 'red',                            listeners:{change:function(THIS,val1){                                if(val1==true){                                    panel_tree_grid_areas.setVisible(false);                                    panel_tree_agencias.setVisible(false);                                    panel_tree_grid.setVisible(true);                                }                            }}                        },                        {                            boxLabel: 'Agencias',                            name: 'datos',                            inputValue: 'green',                            listeners:{change:function(THIS,val1){                                if(val1==true){                                    panel_tree_grid.setVisible(false);                                    panel_tree_grid_areas.setVisible(false);                                    panel_tree_agencias.setVisible(true);                                }                            }                            }                        },                        {                            boxLabel: '&Aacute;reas',                            name: 'datos',                            inputValue: 'blue',                            listeners:{change:function(THIS,val1){                                if(val1==true){                                    panel_tree_grid.setVisible(false);                                    panel_tree_agencias.setVisible(false);                                    panel_tree_grid_areas.setVisible(true);                                }                            }}                        }                    ]                },                {                    xtype: 'fieldset',                    flex: 1,cls:'btn-bar',                    title: 'Organigrama',                    defaultType: 'radio', // each item will be a radio button                    layout: 'anchor',                    defaults: {                        anchor: '100%',                        hideEmptyLabel: false,                        hideLabel:true                    },                    items: [                                                {                            xtype: 'button',                            id: 'organigrama',                            cls:'btn btn-primary',                            text: 'Organigrama',                            handler:this.Organigrama                        }                    ]                }            ]        });        var panelOrganigrama = Ext.create('Ext.panel.Panel', {            border:2,            height:'100%',            width:'83%',            autoScroll:true,            region: 'center',            padding:5,            frame:true,            id:'panelOrganigrama',            name:'panelOrganigrama',            bodyStyle: {background: '#157fcc',padding: '10px'},            items: [panel_tree_grid,panel_tree_grid_areas,panel_tree_agencias]            });        var _panel = new Ext.Panel({            title: 'Organigrama General',            border: true,            id: 'OrganigramapanelNombre',            frame: true,            layout: 'border',            height: '100%',            width: '100%',            items: [panel_tree,panelOrganigrama],            listeners: {                afterrender: function () {                },                scope: this            }        });        ///-----------------------------------------------------------------------------------------------------------//        return _panel;    }    this.Free = function(){}    this.ShowMainWindow = function(){App.ShowMainPanel(null);}    this.Organigrama = function(){        var storeAgecias=App.PerformSyncServerRequest('Organigrama.Organigrama.DibujarOrganigrama');          console.log(storeAgecias);        var panel_tree = Ext.create('Ext.form.Panel', {            bodyPadding: 5,            width: '20%',            autoScroll: true,            layout: 'anchor',            region: 'west',            collapsed: false,                        animCollapse: true,            collapsible: true,            tools:[                {                    type:'help',                    tooltip: '¿Necesita Ayuda?',                    handler: function(event, toolEl, panel){                        Ext.create('Ext.window.Window', {                            title: '¿Necesita Ayuda?',                            height:'55%',iconCls:'help',                            width:'50%',                            autoScroll:true,modal:true,                            layout: 'anchor',                            html:                                '<ul class="nav nav-list">' +                                    '<li>El modulo <span class="label label-info">" Organigrama"</span>' +                                    ' Permite ver la distribuci&oacute;n de los trabajadores por &aacute;reas dada su clasificaci&oacute;n' +                                    ' directo e indirecto.</li>' +                                    '</ul>'                        }).show();                    }                }],           // collapseMode:'mini',            defaults: {anchor: '100%'}                    });                var _panel2 = new Ext.Panel({            border: false,            id: 'mostrar',            region:'center',            frame: false,//            width:'900px',            //height: App.GetDesktopHeigth(),            //width: App.GetDesktopWidth(),//            html:'<div style="overflow:scroll;border:1px solid Red;width:100%;height:492px"><svg id="mi_org" width="'+storeAgecias.rows.width+'" height="800px">'+            html:'<div style="overflow:scroll;width:100%;height:492px;z-index:100">'+                 '<div style="width:'+storeAgecias.rows.width+'px;height:'+storeAgecias.rows.height+'px;">'+                    storeAgecias.rows.organigrama                +'</div><svg id="mi_org" width="'+storeAgecias.rows.width+'" height="'+storeAgecias.rows.height+'" style="z-index:50;transform:translate(0,-'+storeAgecias.rows.height+'px);-moz-transform:translate(0,-'+storeAgecias.rows.height+'px);-o-transform:translate(0,-'+storeAgecias.rows.height+'px);-webkit-transform:translate(0,-'+storeAgecias.rows.height+'px);">'+storeAgecias.rows.svg+'</svg></div>'        });        var _panel = new Ext.Panel({            title: 'Todos Los reportes',            border: true,            id: 'panelNombre',            frame: true,            layout: 'border',            height: App.GetDesktopHeigth(),            width: App.GetDesktopWidth(),            items: [_panel2 ],            listeners: {                afterrender: function () {                    // this.__data_store.load({params: {start: 0, limit: 25}});                },                scope: this            }        });        var _gst_win = new Ext.Window(            {                title:'Organigrama',                id: '_gst_Add_win_id',                name: '_gst_Add_win_id',                height: 600,                width: 800,                maximizable:true,                closable:true,                plain: true,                layout: 'fit',                modal: true,                resizable: false,                items: [_panel],                buttons: [{                    text: 'Cerrar',                    cls:'btn btn-primary',                    //iconCls:'icon-remove-circle',                    handler: function(){                        _gst_win.close();                    }                },{                    text: 'Imprimir',                    cls:'btn btn-primary',                    //iconCls:'icon-remove-circle',                    handler: function(){                        var __Imprimir = App.BuildJsonStore('Organigrama.Organigrama.ImpDibujarOrganigrama',                        {                            fields : [{name : 'organigrama'}],                            proxy: {type: 'ajax',reader: {type: 'json',root: 'rows',totalProperty: 'results'}},                            autoLoad: false,listeners:{                            load:function(store, records,opt){                                console.log(store);                                var a = window.open('','','menubar=yes');                                a.document.write(store.getAt(0).data.organigrama);                                a.document.close();                            }                        }                        });                        __Imprimir.load();                                                                   }                  }]            });        _gst_win.show();    }}App.RegisterModule('Organigrama', new Organigrama());function pintar(val2,met,record,a,b,c,d){    var bajas = record.data.baja;    var licencia = record.data.licencia;    if(bajas==true){        met.style = 'font-style:italic !important;background: #E63C56;';    }    else if(licencia==true){        met.style = 'font-style:italic !important;background: #4CB1FF;';    }    else if(bajas==true && licencia==true){        met.style = 'font-style:italic !important;background: #E63C56;';    }    return val2;}